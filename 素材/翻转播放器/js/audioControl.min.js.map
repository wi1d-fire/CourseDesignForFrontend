{"version":3,"sources":["js/audioControl.js"],"names":["global","$","wiggle","selector","duration","each","wiggleProp","this","wiggleStop","TweenMax","killTweensOf","staggerTo","scale","element","prop","min","max","Math","random","tweenProps","ease","Power1","easeInOut","onComplete","onCompleteParams","to","buttonControl","e","hasClass","$cover","addClass","removeClass","$playlist","$body","tl","play","pause","siblings","audio","playPause","d","userAgent","navigator","toLowerCase","mobile_devices","document","html","documentElement","i","l","length","indexOf","classList","add","TimelineMax","paused","from","rotate","Power0","easeIn","$container","$playlist_items","$buttons","$button","eq","on","proxy","audiojs","events","ready","playAudio","preventDefault","parent","load","path","attr","as","createAll","trackEnded","next","filter","first","find","first_track","$item_button","window","jQuery"],"mappings":"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","file":"audioControl.min.js","sourcesContent":["(function(global, $){\n  'use strict';\n  \n  //////////////\n  // 모바일 감지\n  //////////////\n  \n  var userAgent      = global.navigator.userAgent.toLowerCase();\n  var mobile_devices = ['iphone', 'ipad', 'android'];\n  var document       = global.document;\n  var html           = document.documentElement;\n\n  for ( var d, i=0, l=mobile_devices.length; i<l; ++i ) {\n    d = mobile_devices[i];\n  \tif ( userAgent.indexOf(d) > -1 ) {\n      html.classList.add('mobile');\n      break;\n    }\n  }\n  \n  \n  /////////////////////\n  // 디바이스 회전 방향 고정\n  /////////////////////\n\n  // if ( global.screen.lockOrientation('portrait') ) {\n  \t// 고정될 경우, 해당 조건이 처리 됨.\n  // } else {\n    // 고정되지 않을 경우, 해당 조건이 처리 됨.\n  // }\n  \n  \n  //////////////\n  // 타임라인 컨트롤\n  //////////////\n\n  var tl = new TimelineMax({paused: true});\n\n  tl.from('.album-cover', 360, { rotate: -720, ease: Power0.easeIn });\n\n  function wiggle(selector, duration){\n    $(selector).each(function() {\n      wiggleProp(this, 'scale', 0.45, duration);\n      wiggleProp(this, 'rotation', -2, 2);\n      // wiggleProp(this, 'x', -3, 3);\n      wiggleProp(this, 'y', -3, 3);\n    });\n  }\n\n  function wiggleStop(selector) {\n    TweenMax.killTweensOf(selector);\n    TweenMax.staggerTo(selector,0.2,{scale:1},0.05);\n  }\n\n  function wiggleProp(element, prop, min, max, duration) {\n    var duration = duration || Math.random() * (0.1 - 0.2) + 0.1;\n    var tweenProps = {\n      ease: Power1.easeInOut,\n      onComplete: wiggleProp,\n      onCompleteParams: [element, prop, min, max]\n    };\n    tweenProps[prop] = Math.random() * (max - min) + min;\n    TweenMax.to(element, duration, tweenProps);\n  }\n\n  // --------------------------------------------------------------------------------\n\n  ////////////\n  // 앨범 컨트롤\n  ////////////\n\n  var $body           = $('body'),\n      $container      = $('.album-container'),\n      $playlist       = $('.playlist-container', $container),\n      $playlist_items = $('.item', $playlist),\n      $cover          = $('.album-cover', $container),\n      $buttons        = $('.button', $container),\n      audio;\n\n  $.each($buttons, function(i) {\n    var $button = $buttons.eq(i);\n    $button.on('click', $.proxy(buttonControl, $button));\n  });\n\n  function buttonControl(e) {\n    var is_play = this.hasClass('is-play');\n    if ( is_play ) {\n      $cover.addClass('is-play').removeClass('is-pause');\n      $playlist.addClass('is-close');\n      $body.addClass('is-play');\n      wiggle('.album-control .button', 1);\n      tl.play();\n    } else {\n      $cover.addClass('is-pause').removeClass('is-play');\n      $playlist.removeClass('is-close');\n      $body.removeClass('is-play');\n      wiggleStop('.album-control .button');\n      tl.pause();\n    }\n    this.siblings('.is-pre').removeClass('is-pre');\n    this.addClass('is-pre');\n    audio.playPause();\n  }\n\n  // --------------------------------------------------------------------------------\n\n  /////////////\n  // 오디오 컨트롤\n  /////////////\n\n  audiojs.events.ready(function() {\n    \n    var path = 'https://cdn.rawgit.com/yamoo9/yamoo9.github.io/master/sef/media/source/';\n\n    var as = audiojs.createAll({\n      // 오디오 종료 시, 다음 트랙 재생\n      trackEnded: function() {\n        var next = $playlist_items.filter('.is-play').next();\n        if (!next.length) { next = $playlist_items.first(); }\n        next.addClass('is-play').siblings().removeClass('is-play');\n        audio.load( path + next.find('a').attr('href') );\n        audio.play();\n      }\n    });\n\n    // 오디오 첫번째 트랙 로드\n    audio           = as[0];\n    var first       = $playlist_items.first();\n    var first_track = path + first.find('a').attr('href');\n\n    first.addClass('is-play');\n    audio.load(first_track);\n\n    // 오디오 클릭 이벤트 핸들링\n    $.each($playlist_items, function(i) {\n      var $item_button = $playlist_items.eq(i).find('a');\n      $item_button.on('click', $.proxy(playAudio, $item_button));\n    });\n\n    function playAudio(e) {\n      e.preventDefault();\n      var parent = this.parent();\n      parent.addClass('is-play').siblings('.is-play').removeClass('is-play');\n      audio.load( path + this.attr('href') );\n      // audio.play();\n    }\n\n  });\n\n})(window, window.jQuery, window.audiojs);"]}